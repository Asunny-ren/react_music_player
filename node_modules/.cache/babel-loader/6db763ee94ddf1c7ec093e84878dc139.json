{"ast":null,"code":"import _classCallCheck from \"/Users/RJD/Desktop/music-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/RJD/Desktop/music-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/RJD/Desktop/music-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/RJD/Desktop/music-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/RJD/Desktop/music-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/RJD/Desktop/music-app/src/page/player/Player.js\";\nimport React, { Component } from 'react';\nimport Progress from '../../components/progress/progress';\nimport './player.styl';\nimport { NavLink } from 'react-router-dom';\nimport Pubsub from 'pubsub-js'; // import $ from 'jquery';\n// import 'jPlayer';\n\nvar $ = window.$;\nvar duration = null;\n\nvar Player =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Player, _Component);\n\n  function Player(props) {\n    var _this;\n\n    _classCallCheck(this, Player);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Player).call(this, props));\n\n    _this.formatTime = function (time) {\n      time = Math.floor(time);\n      var minutes = Math.floor(time / 60);\n      var seconds = Math.floor(time % 60);\n      seconds = seconds < 10 ? \"0\".concat(seconds) : seconds;\n      return \"\".concat(minutes, \":\").concat(seconds);\n    };\n\n    _this.playPrev = function () {\n      Pubsub.publish('PLAY_PREV');\n    };\n\n    _this.playNext = function () {\n      Pubsub.publish('PLAY_NEXT');\n    };\n\n    _this.componentWillUnMount = function () {\n      $('#player').unbind($.jPlayer.event.timeupdate);\n    };\n\n    _this.progressChangeHandler = function (progress) {\n      $('#player').jPlayer('play', duration * progress);\n    };\n\n    _this.changeVolumeHandler = function (progress) {\n      $('#player').jPlayer('volume', progress);\n    };\n\n    _this.play = function () {\n      if (_this.state.isPlay) {\n        $('#player').jPlayer('pause');\n      } else {\n        $('#player').jPlayer('play');\n      }\n\n      _this.setState({\n        isPlay: !_this.state.isPlay\n      });\n    };\n\n    _this.state = {\n      progress: 0,\n      volume: 0,\n      isPlay: true,\n      leftTime: ''\n    };\n    return _this;\n  }\n\n  _createClass(Player, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      $('#player').bind($.jPlayer.event.timeupdate, function (e) {\n        duration = e.jPlayer.status.duration;\n\n        _this2.setState({\n          volume: e.jPlayer.options.volume * 100,\n          progress: e.jPlayer.status.currentPercentAbsolute,\n          leftTime: _this2.formatTime(duration * (1 - e.jPlayer.status.currentPercentAbsolute / 100))\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"player-page\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        className: \"caption\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, React.createElement(NavLink, {\n        to: \"/list\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, \"\\u6211\\u7684\\u79C1\\u4EBA\\u97F3\\u4E50\\u574A>\")), React.createElement(\"div\", {\n        className: \"mt20 row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"controll-wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"music-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, this.props.currentMusicItem.title), React.createElement(\"h3\", {\n        className: \"music-artist mt10\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, this.props.currentMusicItem.artist), React.createElement(\"div\", {\n        className: \"row mt20\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"left-time -col-auto\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, \"-\", this.state.leftTime), React.createElement(\"div\", {\n        className: \"volume-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"icon-volume rt\",\n        style: {\n          top: 5,\n          left: -5\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"volume-wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, React.createElement(Progress, {\n        progress: this.state.volume,\n        onProgressChange: this.changeVolumeHandler,\n        barColor: \"#aaa\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      })))), React.createElement(\"div\", {\n        style: {\n          height: 10,\n          lineHeight: '10px',\n          marginTop: '10px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, React.createElement(Progress, {\n        progress: this.state.progress,\n        onProgressChange: this.progressChangeHandler,\n        barColor: \"#2f9842\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"mt35 row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"icon prev\",\n        onClick: this.playPrev,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }), React.createElement(\"i\", {\n        className: \"icon ml20 \".concat(this.state.isPlay ? 'pause' : 'play'),\n        onClick: this.play,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }), React.createElement(\"i\", {\n        className: \"icon next ml20\",\n        onClick: this.playNext,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"-col-auto\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"icon repeat-cycle\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      })))), React.createElement(\"div\", {\n        className: \"-col-auto cover\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: this.props.currentMusicItem.cover,\n        alt: this.props.currentMusicItem.title,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return Player;\n}(Component);\n\nexport default Player;","map":{"version":3,"sources":["/Users/RJD/Desktop/music-app/src/page/player/Player.js"],"names":["React","Component","Progress","NavLink","Pubsub","$","window","duration","Player","props","formatTime","time","Math","floor","minutes","seconds","playPrev","publish","playNext","componentWillUnMount","unbind","jPlayer","event","timeupdate","progressChangeHandler","progress","changeVolumeHandler","play","state","isPlay","setState","volume","leftTime","bind","e","status","options","currentPercentAbsolute","currentMusicItem","title","artist","top","left","height","lineHeight","marginTop","cover"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport Progress from '../../components/progress/progress';\nimport './player.styl';\nimport {NavLink} from 'react-router-dom';\nimport Pubsub from 'pubsub-js';\n// import $ from 'jquery';\n// import 'jPlayer';\n\nconst $ = window.$;\nlet duration = null;\n\nclass Player extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      progress : 0,\n      volume: 0,\n      isPlay: true,\n      leftTime: ''\n    }\n  }\n\n  formatTime = (time) => {\n    time = Math.floor(time);\n    let minutes = Math.floor(time / 60);\n    let seconds = Math.floor(time % 60);\n    seconds = seconds < 10 ? `0${seconds}` : seconds;\n    return `${minutes}:${seconds}`;\n  }\n\n  playPrev = () => {\n    Pubsub.publish('PLAY_PREV');\n  }\n\n  playNext = () => {\n    Pubsub.publish('PLAY_NEXT');\n  }\n\n  componentDidMount () {\n    $('#player').bind($.jPlayer.event.timeupdate, (e) => {\n      duration = e.jPlayer.status.duration;\n      this.setState({\n        volume: e.jPlayer.options.volume * 100,\n        progress: e.jPlayer.status.currentPercentAbsolute,\n        leftTime: this.formatTime(duration * (1 - e.jPlayer.status.currentPercentAbsolute / 100))\n      })\n    })\n  }\n\n  componentWillUnMount = () => {\n    $('#player').unbind($.jPlayer.event.timeupdate);\n  }\n\n  progressChangeHandler = progress => {\n    $('#player').jPlayer('play', duration * progress);\n  }\n\n  changeVolumeHandler = progress => {\n    $('#player').jPlayer('volume', progress);\n  }\n\n  play = () => {\n    if(this.state.isPlay) {\n      $('#player').jPlayer('pause');\n    }else {\n      $('#player').jPlayer('play');\n    }\n    this.setState({\n      isPlay: !this.state.isPlay\n    })\n  }\n\n  render () {\n    return (\n      <div className=\"player-page\">\n        {/* <h1 className=\"caption\"><Link to=\"/list\">我的私人音乐坊 &gt;</Link></h1> */}\n        <h1 className=\"caption\"><NavLink  to=\"/list\">我的私人音乐坊></NavLink></h1>\n        <div className=\"mt20 row\">\n          <div className=\"controll-wrapper\">\n            <h2 className=\"music-title\">{this.props.currentMusicItem.title}</h2>\n            <h3 className=\"music-artist mt10\">{this.props.currentMusicItem.artist}</h3>\n            <div className=\"row mt20\">\n              <div className=\"left-time -col-auto\">-{this.state.leftTime}</div>\n              <div className=\"volume-container\">\n                <i className=\"icon-volume rt\" style={{top: 5, left: -5}}></i>\n                <div className=\"volume-wrapper\">\n                  <Progress\n                    progress={this.state.volume}\n                    onProgressChange={this.changeVolumeHandler}\n                    barColor=\"#aaa\" />\n                </div>\n              </div>\n            </div>\n            <div style={{height: 10, lineHeight: '10px', marginTop: '10px'}}>\n              <Progress \n                progress={this.state.progress}\n                onProgressChange = {this.progressChangeHandler}\n                barColor=\"#2f9842\"\n              />\n            </div>\n            <div className=\"mt35 row\">\n              <div>\n                <i className=\"icon prev\" onClick={this.playPrev}></i>\n                <i className={`icon ml20 ${this.state.isPlay ? 'pause' : 'play'}`} onClick={this.play}></i>\n                <i className=\"icon next ml20\" onClick={this.playNext}></i>\n              </div>\n              <div className=\"-col-auto\">\n                <i className=\"icon repeat-cycle\"></i>\n              </div>\n            </div>\n          </div>\n          <div className=\"-col-auto cover\">\n            <img src={this.props.currentMusicItem.cover} alt={this.props.currentMusicItem.title}/>\n          </div>\n        </div>\n    </div>\n    )\n  }\n}\n\nexport default Player;"]},"metadata":{},"sourceType":"module"}